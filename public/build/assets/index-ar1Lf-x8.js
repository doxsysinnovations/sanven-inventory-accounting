import{r as t,m as R,j as e,L as F}from"./app-DOUPXsiX.js";import{A as q}from"./app-layout-PY3kmcwW.js";import{I as D}from"./input-Bbm0gJlk.js";import{T as G,a as J,b as d,c as u,d as K,e as r}from"./table-BLRovgye.js";import{B as a}from"./app-logo-icon-CsPC_L6o.js";import{P as Q}from"./layout-Bux1G0Ip.js";import{H as V}from"./heading-small-BPxtPpy9.js";import{D as b,a as W,b as y,c as S,d as v,e as X,f as Y}from"./dialog-G8VnJk0B.js";import{L as Z,y as m}from"./ReactToastify-CBCxvM_K.js";import"./index-BU479ty5.js";import"./index-CsK4GaqG.js";const _=[{title:"Manage Units",href:"/units"}];function ue({units:C}){const[h,N]=t.useState(""),[x,$]=t.useState("all"),[U,n]=t.useState(!1),[w,l]=t.useState(!1),[T,j]=t.useState(null),[i,c]=t.useState(null),{data:L,setData:p,post:A,put:E,processing:I,errors:f,reset:o,delete:O}=R({name:""}),k=s=>{s.preventDefault(),i?E(route("units.update",i.id),{onSuccess:()=>{n(!1),o(),c(null),m.success("Unit updated successfully")}}):A(route("units.store"),{onSuccess:()=>{n(!1),o(),m.success("Unit created successfully")}})},H=s=>{c(s),p("name",s.name),n(!0)},B=s=>{j(s),l(!0)},z=()=>{O(route("units.destroy",T.id),{onSuccess:()=>{l(!1),j(null),m.success("Unit deleted successfully")}})},g=C.filter(s=>{const M=s.name.toLowerCase().includes(h.toLowerCase()),P=x==="all"||s.status.toLowerCase()===x;return M&&P});return e.jsxs(q,{breadcrumbs:_,children:[e.jsx(F,{title:"Manage Units"}),e.jsxs(Q,{children:[e.jsx(Z,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(V,{title:"Units Lists",description:"See all units here"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx(D,{type:"text",placeholder:"Search units...",value:h,onChange:s=>N(s.target.value),className:"w-1/3"}),e.jsxs(b,{open:U,onOpenChange:n,children:[e.jsx(W,{asChild:!0,children:e.jsx(a,{onClick:()=>{c(null),o()},children:"Add Unit"})}),e.jsxs(y,{children:[e.jsx(S,{children:e.jsx(v,{children:i?"Edit Unit":"Add New Unit"})}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsx(D,{placeholder:"Unit name",value:L.name,onChange:s=>p("name",s.target.value)}),f.name&&e.jsx("div",{className:"text-red-500 text-sm",children:f.name}),e.jsx(a,{type:"submit",disabled:I,children:i?"Update":"Create"})]})]})]})]}),e.jsx(b,{open:w,onOpenChange:l,children:e.jsxs(y,{children:[e.jsxs(S,{children:[e.jsx(v,{children:"Delete Unit"}),e.jsx(X,{children:"Are you sure you want to delete this unit? This action cannot be undone."})]}),e.jsxs(Y,{children:[e.jsx(a,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:z,children:"Delete"})]})]})}),e.jsx("div",{className:"border rounded-xl overflow-hidden shadow",children:e.jsxs(G,{children:[e.jsx(J,{children:e.jsxs(d,{className:"bg-gray-100",children:[e.jsx(u,{className:"font-semibold",children:"ID"}),e.jsx(u,{className:"font-semibold",children:"Name"}),e.jsx(u,{className:"font-semibold text-center w-[10%]",children:"Action"})]})}),e.jsx(K,{children:g.length>0?g.map(s=>e.jsxs(d,{children:[e.jsx(r,{children:s.id}),e.jsx(r,{children:s.name}),e.jsx(r,{className:"text-right",children:e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>H(s),children:"Edit"}),e.jsx(a,{variant:"destructive",size:"sm",onClick:()=>B(s),children:"Delete"})]})})]},s.id)):e.jsx(d,{children:e.jsx(r,{colSpan:"4",className:"text-center py-4",children:"No units found."})})})]})})]})]})]})]})}export{ue as default};
