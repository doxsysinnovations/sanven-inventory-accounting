import{r as t,m as F,j as e,L as U}from"./app-DOUPXsiX.js";import{A as _}from"./app-layout-PY3kmcwW.js";import{I as h}from"./input-Bbm0gJlk.js";import{T as q,a as G,b as x,c as r,d as J,e as a}from"./table-BLRovgye.js";import{B as i}from"./app-logo-icon-CsPC_L6o.js";import{P as K}from"./layout-Bux1G0Ip.js";import{H as Q}from"./heading-small-BPxtPpy9.js";import{S as V}from"./status-switch-Du_LaTWg.js";import{D as S,a as W,b,c as y,d as v,e as X,f as Y}from"./dialog-G8VnJk0B.js";import{L as Z,y as p}from"./ReactToastify-CBCxvM_K.js";import"./index-BU479ty5.js";import"./index-CsK4GaqG.js";import"./index-C7y8VOSW.js";const $=[{title:"Manage Categories",href:"/categories"}];function xe({categories:N}){const[j,w]=t.useState(""),[g,ee]=t.useState("all"),[T,l]=t.useState(!1),[L,n]=t.useState(!1),[I,f]=t.useState(null),[o,m]=t.useState(null),{data:C,setData:c,post:A,put:E,processing:O,errors:d,reset:u,delete:k}=F({name:"",description:""}),H=s=>{s.preventDefault(),o?E(route("categories.update",o.id),{onSuccess:()=>{l(!1),u(),m(null),p.success("Category updated successfully")}}):A(route("categories.store"),{onSuccess:()=>{l(!1),u(),p.success("Category created successfully")}})},B=s=>{m(s),c("name",s.name),c("description",s.description),l(!0)},z=s=>{f(s),n(!0)},M=()=>{k(route("categories.destroy",I.id),{onSuccess:()=>{n(!1),f(null),p.success("Category deleted successfully")}})},D=N.filter(s=>{const P=s.name.toLowerCase().includes(j.toLowerCase()),R=g==="all"||s.status.toLowerCase()===g;return P&&R});return e.jsxs(_,{breadcrumbs:$,children:[e.jsx(U,{title:"Manage Categories"}),e.jsxs(K,{children:[e.jsx(Z,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Q,{title:"Categories Lists",description:"See all categories here"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx(h,{type:"text",placeholder:"Search categories...",value:j,onChange:s=>w(s.target.value),className:"w-1/3"}),e.jsxs(S,{open:T,onOpenChange:l,children:[e.jsx(W,{asChild:!0,children:e.jsx(i,{onClick:()=>{m(null),u()},children:"Add Category"})}),e.jsxs(b,{children:[e.jsx(y,{children:e.jsx(v,{children:o?"Edit Category":"Add New Category"})}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsx(h,{placeholder:"Category name",value:C.name,onChange:s=>c("name",s.target.value)}),d.name&&e.jsx("div",{className:"text-red-500 text-sm",children:d.name}),e.jsx(h,{placeholder:"Description",value:C.description,onChange:s=>c("description",s.target.value)}),d.description&&e.jsx("div",{className:"text-red-500 text-sm",children:d.description}),e.jsx(i,{type:"submit",disabled:O,children:o?"Update":"Create"})]})]})]})]}),e.jsx(S,{open:L,onOpenChange:n,children:e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsx(v,{children:"Delete Category"}),e.jsx(X,{children:"Are you sure you want to delete this category? This action cannot be undone."})]}),e.jsxs(Y,{children:[e.jsx(i,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(i,{variant:"destructive",onClick:M,children:"Delete"})]})]})}),e.jsx("div",{className:"border rounded-xl overflow-hidden shadow",children:e.jsxs(q,{children:[e.jsx(G,{children:e.jsxs(x,{className:"bg-gray-100",children:[e.jsx(r,{className:"font-semibold",children:"ID"}),e.jsx(r,{className:"font-semibold",children:"Name"}),e.jsx(r,{className:"font-semibold",children:"Description"}),e.jsx(r,{className:"font-semibold",children:"Status"}),e.jsx(r,{className:"font-semibold text-center w-[10%]",children:"Action"})]})}),e.jsx(J,{children:D.length>0?D.map(s=>e.jsxs(x,{children:[e.jsx(a,{children:s.id}),e.jsx(a,{children:s.name}),e.jsx(a,{children:s.description}),e.jsx(a,{children:e.jsx(V,{model:"Category",recordId:s.id,initialStatus:s.is_active})}),e.jsx(a,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>B(s),children:"Edit"}),e.jsx(i,{variant:"destructive",size:"sm",onClick:()=>z(s),children:"Delete"})]})})]},s.id)):e.jsx(x,{children:e.jsx(a,{colSpan:"4",className:"text-center py-4",children:"No categories found."})})})]})})]})]})]})]})}export{xe as default};
