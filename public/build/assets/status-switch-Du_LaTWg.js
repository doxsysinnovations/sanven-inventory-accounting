import{r as i,j as d,S as T}from"./app-DOUPXsiX.js";import{u as I,c as A,a as F,b as H}from"./index-BU479ty5.js";import{u as M,c as w}from"./app-logo-icon-CsPC_L6o.js";import{u as $}from"./index-C7y8VOSW.js";import{P as x}from"./index-CsK4GaqG.js";import{y as g}from"./ReactToastify-CBCxvM_K.js";var S="Switch",[z,V]=A(S),[B,q]=z(S),C=i.forwardRef((e,a)=>{const{__scopeSwitch:t,name:s,checked:r,defaultChecked:u,required:o,disabled:n,value:c="on",onCheckedChange:l,form:m,...h}=e,[p,j]=i.useState(null),R=M(a,b=>j(b)),k=i.useRef(!1),v=p?m||!!p.closest("form"):!0,[f=!1,_]=I({prop:r,defaultProp:u,onChange:l});return d.jsxs(B,{scope:t,checked:f,disabled:n,children:[d.jsx(x.button,{type:"button",role:"switch","aria-checked":f,"aria-required":o,"data-state":E(f),"data-disabled":n?"":void 0,disabled:n,value:c,...h,ref:R,onClick:F(e.onClick,b=>{_(N=>!N),v&&(k.current=b.isPropagationStopped(),k.current||b.stopPropagation())})}),v&&d.jsx(L,{control:p,bubbles:!k.current,name:s,value:c,checked:f,required:o,disabled:n,form:m,style:{transform:"translateX(-100%)"}})]})});C.displayName=S;var y="SwitchThumb",P=i.forwardRef((e,a)=>{const{__scopeSwitch:t,...s}=e,r=q(y,t);return d.jsx(x.span,{"data-state":E(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:a})});P.displayName=y;var L=e=>{const{control:a,checked:t,bubbles:s=!0,...r}=e,u=i.useRef(null),o=$(t),n=H(a);return i.useEffect(()=>{const c=u.current,l=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(l,"checked").set;if(o!==t&&h){const p=new Event("click",{bubbles:s});h.call(c,t),c.dispatchEvent(p)}},[o,t,s]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:u,style:{...e.style,...n,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function E(e){return e?"checked":"unchecked"}var O=C,D=P;function U({className:e,...a}){return d.jsx(O,{"data-slot":"switch",className:w("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:d.jsx(D,{"data-slot":"switch-thumb",className:w("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const Y=({model:e,recordId:a,initialStatus:t})=>{const[s,r]=i.useState(t),[u,o]=i.useState(!1),n=async()=>{if(!u){o(!0);try{await T.post(`/toggle-status/${e}/${a}`,{current_status:s},{onSuccess:c=>{const l=c.is_active;r(l),g.success(`${e} status updated successfully`)},onError:()=>{r(s),g.error("Failed to update status")},onFinish:()=>{o(!1)}})}catch(c){console.error("Error updating status",c),r(s),g.error("Failed to update status"),o(!1)}}};return d.jsx(U,{checked:s,onCheckedChange:n,disabled:u,className:"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-gray-500"})};export{Y as S};
